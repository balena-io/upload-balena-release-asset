"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.compare = exports.validate = exports.types = void 0;
const TypeUtils = require("../type-utils");
let bcrypt;
try {
    bcrypt = require('bcrypt');
}
catch {
    bcrypt = require('bcryptjs');
}
exports.types = {
    postgres: 'CHAR(60)',
    mysql: 'CHAR(60)',
    websql: 'CHAR(60)',
    odata: {
        name: 'Edm.String',
    },
};
exports.validate = TypeUtils.validate.checkRequired(async (value) => {
    if (typeof value !== 'string') {
        throw new Error('is not a string');
    }
    const salt = await bcrypt.genSalt();
    return bcrypt.hash(value, salt);
});
exports.compare = bcrypt.compare.bind(bcrypt);
//# sourceMappingURL=hashed.js.map